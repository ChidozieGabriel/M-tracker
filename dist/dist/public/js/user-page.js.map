{"version":3,"sources":["../../../public/js/user-page.js"],"names":["requests","document","getElementById","token","JSON","parse","localStorage","getItem","apiUrl","createRequest","fetch","headers","Headers","Authorization","then","res","json","data","requestss","result","forEach","request","id","date","status","innerHTML","catch","error","console","addEventListener","e","preventDefault","apiUrl2","payload","name","value","email","dept","method","body","message","reset","log"],"mappings":"AAAA;;AAEA,IAAIA,WAAWC,SAASC,cAAT,CAAwB,cAAxB,CAAf;AACA,IAAIC,QAAQC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,OAArB,CAAX,CAAZ;AACA,IAAIC,SAAS,yBAAb;AACA,IAAIC,gBAAgBR,SAASC,cAAT,CAAwB,eAAxB,CAApB;;AAEA,IAAIC,KAAJ,EAAW;AACTO,QAAMF,MAAN,EAAc;AACZG,aAAS,IAAIC,OAAJ,CAAY;AACnBC,qBAAe,YAAYV;AADR,KAAZ;AADG,GAAd,EAIGW,IAJH,CAIQ,UAAUC,GAAV,EAAe;AACrB,WAAOA,IAAIC,IAAJ,EAAP;AACD,GAND,EAMGF,IANH,CAMQ,UAAUG,IAAV,EAAgB;AACtB;AACA,QAAIC,YAAY,EAAhB;AACAD,SAAKE,MAAL,CAAYC,OAAZ,CAAoB,UAAUC,OAAV,EAAmB;AACrCH,mBAAa,wEAAwEG,QAAQC,EAAhF,GAAqF,0DAArF,GAAkJD,QAAQA,OAA1J,GAAoK,qDAApK,GAA4NA,QAAQE,IAApO,GAA2O,sDAA3O,GAAoSF,QAAQG,MAA5S,GAAqT,IAArT,GAA4TH,QAAQG,MAApU,GAA6U,wDAA1V;AACD,KAFD;AAGAxB,aAASyB,SAAT,GAAqBP,SAArB;AACD,GAbD,EAaGQ,KAbH,CAaS,UAAUC,KAAV,EAAiB;AACxB,WAAOC,QAAQD,KAAR,CAAcA,KAAd,CAAP;AACD,GAfD;;AAiBAlB,gBAAcoB,gBAAd,CAA+B,QAA/B,EAAyC,UAAUC,CAAV,EAAa;AACpDA,MAAEC,cAAF;AACA,QAAIC,UAAU,yBAAd;AACA,QAAIC,UAAU;AACZC,YAAMjC,SAASC,cAAT,CAAwB,MAAxB,EAAgCiC,KAD1B;AAEZC,aAAOnC,SAASC,cAAT,CAAwB,OAAxB,EAAiCiC,KAF5B;AAGZE,YAAMpC,SAASC,cAAT,CAAwB,MAAxB,EAAgCiC,KAH1B;AAIZd,eAASpB,SAASC,cAAT,CAAwB,SAAxB,EAAmCiC;AAJhC,KAAd;;AAOAzB,UAAMsB,OAAN,EAAe;AACbM,cAAQ,MADK;AAEbC,YAAM,UAAUN,QAAQC,IAAlB,GAAyB,SAAzB,GAAqCD,QAAQG,KAA7C,GAAqD,QAArD,GAAgEH,QAAQI,IAAxE,GAA+E,WAA/E,GAA6FJ,QAAQZ,OAF9F;AAGbV,eAAS,IAAIC,OAAJ,CAAY;AACnB,wBAAgB,mCADG;AAEnBC,uBAAe,YAAYV;AAFR,OAAZ;AAHI,KAAf,EAOGW,IAPH,CAOQ,UAAUC,GAAV,EAAe;AACrB,aAAOA,IAAIC,IAAJ,EAAP;AACD,KATD,EASGF,IATH,CASQ,UAAUG,IAAV,EAAgB;AACtB,UAAIA,KAAKuB,OAAL,KAAiB,EAArB,EAAyB;AACvB/B,sBAAcgC,KAAd;AACAb,gBAAQc,GAAR,CAAYzB,KAAKuB,OAAjB;AACD;AACF,KAdD,EAcGd,KAdH,CAcS,UAAUC,KAAV,EAAiB;AACxB,aAAOC,QAAQD,KAAR,CAAc,YAAYA,KAA1B,CAAP;AACD,KAhBD;AAiBD,GA3BD;AA4BD,CA9CD,MA8CO;AACL1B,WAASC,cAAT,CAAwB,OAAxB,EAAiCuB,SAAjC,GAA6C,2FAA7C;AACD;AACD","file":"user-page.js","sourcesContent":["'use strict';\r\n\r\nvar requests = document.getElementById('userRequests');\r\nvar token = JSON.parse(localStorage.getItem('token'));\r\nvar apiUrl = '/api/v1/users/requests/';\r\nvar createRequest = document.getElementById('createRequest');\r\n\r\nif (token) {\r\n  fetch(apiUrl, {\r\n    headers: new Headers({\r\n      Authorization: 'Bearer ' + token\r\n    })\r\n  }).then(function (res) {\r\n    return res.json();\r\n  }).then(function (data) {\r\n    // console.log(data.result);\r\n    var requestss = '';\r\n    data.result.forEach(function (request) {\r\n      requestss += '\\n         <li>\\n              <a href=\\'user-view-details.html?id=' + request.id + '\\' title=\"Click to view details\">\\n                  <p>' + request.request + '</p>\\n                  <span class=\"request-date\">' + request.date + '</span>\\n                  <span class=\"label label-' + request.status + '\">' + request.status + '</span>\\n              </a>\\n          </li>\\n        ';\r\n    });\r\n    requests.innerHTML = requestss;\r\n  }).catch(function (error) {\r\n    return console.error(error);\r\n  });\r\n\r\n  createRequest.addEventListener('submit', function (e) {\r\n    e.preventDefault();\r\n    var apiUrl2 = '/api/v1/users/requests/';\r\n    var payload = {\r\n      name: document.getElementById('name').value,\r\n      email: document.getElementById('email').value,\r\n      dept: document.getElementById('dept').value,\r\n      request: document.getElementById('request').value\r\n    };\r\n\r\n    fetch(apiUrl2, {\r\n      method: 'POST',\r\n      body: 'name=' + payload.name + '&email=' + payload.email + '&dept=' + payload.dept + '&request=' + payload.request,\r\n      headers: new Headers({\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        Authorization: 'Bearer ' + token\r\n      })\r\n    }).then(function (res) {\r\n      return res.json();\r\n    }).then(function (data) {\r\n      if (data.message !== '') {\r\n        createRequest.reset();\r\n        console.log(data.message);\r\n      }\r\n    }).catch(function (error) {\r\n      return console.error('Error: ' + error);\r\n    });\r\n  });\r\n} else {\r\n  document.getElementById('alert').innerHTML = '\\n      <p>\\n            Oops!! You do not have access to this page!!\\n      </p>\\n      ';\r\n}\r\n//# sourceMappingURL=user-page.js.map"]}