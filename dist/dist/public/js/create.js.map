{"version":3,"sources":["../../../public/js/create.js"],"names":["token","JSON","parse","sessionStorage","getItem","alertBox","document","getElementById","apiUrl","createRequest","messageBox","auth","fetch","headers","Headers","Authorization","then","res","json","data","error","innerHTML","style","display","catch","addEventListener","e","preventDefault","payload","name","value","email","dept","request","method","body","setTimeout","message","window","location","href"],"mappings":"AAAA;;AAEA,IAAIA,QAAQC,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,OAAvB,CAAX,CAAZ;AACA,IAAIC,WAAWC,SAASC,cAAT,CAAwB,WAAxB,CAAf;AACA,IAAIC,SAAS,yBAAb;AACA,IAAIC,gBAAgBH,SAASC,cAAT,CAAwB,eAAxB,CAApB;AACA,IAAIG,aAAaJ,SAASC,cAAT,CAAwB,eAAxB,CAAjB;;AAEA,IAAIP,SAASA,MAAMW,IAAnB,EAAyB;AACvBC,QAAMJ,MAAN,EAAc;AACZK,aAAS,IAAIC,OAAJ,CAAY;AACnBC,qBAAe,YAAYf,MAAMA;AADd,KAAZ;AADG,GAAd,EAIGgB,IAJH,CAIQ,UAAUC,GAAV,EAAe;AACrB,WAAOA,IAAIC,IAAJ,EAAP;AACD,GAND,EAMGF,IANH,CAMQ,UAAUG,IAAV,EAAgB;AACtB,QAAIA,KAAKC,KAAT,EAAgB;AACdf,eAASgB,SAAT,GAAqB,inBAArB;AACAf,eAASC,cAAT,CAAwB,eAAxB,EAAyCe,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACD;AACF,GAXD,EAWGC,KAXH,CAWS,UAAUJ,KAAV,EAAiB;AACxB,WAAOA,KAAP;AACD,GAbD;;AAeAX,gBAAcgB,gBAAd,CAA+B,QAA/B,EAAyC,UAAUC,CAAV,EAAa;AACpDA,MAAEC,cAAF;AACA,QAAIC,UAAU;AACZC,YAAMvB,SAASC,cAAT,CAAwB,MAAxB,EAAgCuB,KAD1B;AAEZC,aAAOzB,SAASC,cAAT,CAAwB,OAAxB,EAAiCuB,KAF5B;AAGZE,YAAM1B,SAASC,cAAT,CAAwB,MAAxB,EAAgCuB,KAH1B;AAIZG,eAAS3B,SAASC,cAAT,CAAwB,SAAxB,EAAmCuB;AAJhC,KAAd;AAMAlB,UAAMJ,MAAN,EAAc;AACZ0B,cAAQ,MADI;AAEZC,YAAM,UAAUP,QAAQC,IAAlB,GAAyB,SAAzB,GAAqCD,QAAQG,KAA7C,GAAqD,QAArD,GAAgEH,QAAQI,IAAxE,GAA+E,WAA/E,GAA6FJ,QAAQK,OAF/F;AAGZpB,eAAS,IAAIC,OAAJ,CAAY;AACnB,wBAAgB,mCADG;AAEnBC,uBAAe,YAAYf,MAAMA;AAFd,OAAZ;AAHG,KAAd,EAOGgB,IAPH,CAOQ,UAAUC,GAAV,EAAe;AACrB,aAAOA,IAAIC,IAAJ,EAAP;AACD,KATD,EASGF,IATH,CASQ,UAAUG,IAAV,EAAgB;AACtB,UAAIA,KAAKC,KAAT,EAAgB;AACdV,mBAAWW,SAAX,GAAuB,QAAQF,KAAKC,KAAb,GAAqB,MAA5C;AACAV,mBAAWY,KAAX,CAAiBC,OAAjB,GAA2B,OAA3B;AACAa,mBAAW,YAAY;AACrB1B,qBAAWY,KAAX,CAAiBC,OAAjB,GAA2B,MAA3B;AACD,SAFD,EAEG,KAFH;AAGD,OAND,MAMO,IAAIJ,KAAKkB,OAAL,KAAiB,EAArB,EAAyB;AAC9BC,eAAOC,QAAP,CAAgBC,IAAhB,GAAuB,+BAAvB;AACD;AACF,KAnBD,EAmBGhB,KAnBH,CAmBS,UAAUJ,KAAV,EAAiB;AACxB,aAAOA,KAAP;AACD,KArBD;AAsBD,GA9BD;AA+BD,CA/CD,MA+CO;AACLf,WAASgB,SAAT,GAAqB,2iBAArB;AACAf,WAASC,cAAT,CAAwB,eAAxB,EAAyCe,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACD;AACD","file":"create.js","sourcesContent":["'use strict';\n\nvar token = JSON.parse(sessionStorage.getItem('token'));\nvar alertBox = document.getElementById('alert-box');\nvar apiUrl = '/api/v1/users/requests/';\nvar createRequest = document.getElementById('createRequest');\nvar messageBox = document.getElementById('alert-warning');\n\nif (token && token.auth) {\n  fetch(apiUrl, {\n    headers: new Headers({\n      Authorization: 'Bearer ' + token.token\n    })\n  }).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    if (data.error) {\n      alertBox.innerHTML = '\\n    <header>\\n        <a class=\"brand\" href=\"#\">M-Tracker</a>\\n        <nav class=\"nav-bar\">\\n            <ul>\\n                <li><a class=\"btn btn-default\" href=\"../sign-in.html\">Log in</a></li>\\n            </ul>\\n        </nav>\\n    </header>\\n    <div class=\"wrapper\" style=\"margin-top: 200px\">\\n        <div class=\"alert\" id=\"alert-message\">\\n            <p>\\n                Oops! Sorry, Your session has ended, therefore You are not Authorized to view this page, <strong>kindly log in!</strong>\\n            </p>\\n        </div>\\n    </div>\\n    <footer>\\n        <p>&copy;2018 VeeqTor</p>\\n    </footer>\\n      ';\n      document.getElementById('alert-message').style.display = 'block';\n    }\n  }).catch(function (error) {\n    return error;\n  });\n\n  createRequest.addEventListener('submit', function (e) {\n    e.preventDefault();\n    var payload = {\n      name: document.getElementById('name').value,\n      email: document.getElementById('email').value,\n      dept: document.getElementById('dept').value,\n      request: document.getElementById('request').value\n    };\n    fetch(apiUrl, {\n      method: 'POST',\n      body: 'name=' + payload.name + '&email=' + payload.email + '&dept=' + payload.dept + '&request=' + payload.request,\n      headers: new Headers({\n        'Content-Type': 'application/x-www-form-urlencoded',\n        Authorization: 'Bearer ' + token.token\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      if (data.error) {\n        messageBox.innerHTML = '<p>' + data.error + '</p>';\n        messageBox.style.display = 'block';\n        setTimeout(function () {\n          messageBox.style.display = 'none';\n        }, 10000);\n      } else if (data.message !== '') {\n        window.location.href = 'user.html?success=true&type=2';\n      }\n    }).catch(function (error) {\n      return error;\n    });\n  });\n} else {\n  alertBox.innerHTML = '\\n    <header>\\n        <a class=\"brand\" href=\"#\">M-Tracker</a>\\n        <nav class=\"nav-bar\">\\n            <ul>\\n                <li><a class=\"btn btn-default\" href=\"../sign-in.html\">Log in</a></li>\\n            </ul>\\n        </nav>\\n    </header>\\n    <div class=\"wrapper\" style=\"margin-top: 200px\">\\n        <div class=\"alert\" id=\"alert-message\">\\n            <p>\\n                Oops! Sorry, You do not have access to this page!!\\n            </p>\\n        </div>\\n    </div>\\n    <footer>\\n        <p>&copy;2018 VeeqTor</p>\\n    </footer>\\n      ';\n  document.getElementById('alert-message').style.display = 'block';\n}\n//# sourceMappingURL=create.js.map"]}