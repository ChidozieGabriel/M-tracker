{"version":3,"sources":["../../../api/controllers/adminController.js"],"names":["_userModel","require","_userModel2","_interopRequireDefault","obj","__esModule","default","exports","getAllRequests","req","res","sql","text","query","err","result","status","json","end","user","userInfo","rows","approveRequest","id","parseInt","params","requestId","values","length","disapproveRequest","resolveRequest"],"mappings":"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","file":"adminController.js","sourcesContent":["'use strict';\r\n\r\nvar _userModel = require('../models/userModel');\r\n\r\nvar _userModel2 = _interopRequireDefault(_userModel);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nexports.getAllRequests = function (req, res) {\r\n  var sql = {\r\n    text: 'SELECT * FROM requests ORDER BY id ASC'\r\n  };\r\n  _userModel2.default.query(sql, function (err, result) {\r\n    if (err) {\r\n      return res.status(500).json({\r\n        err: err\r\n      }).end();\r\n    }\r\n    res.status(200).json({\r\n      user: req.userInfo,\r\n      result: result.rows\r\n    });\r\n  });\r\n};\r\n\r\nexports.approveRequest = function (req, res) {\r\n  var id = parseInt(req.params.requestId, 10);\r\n  var query = {\r\n    text: 'UPDATE requests SET status=$1 WHERE id=$2 RETURNING *',\r\n    values: ['approved', id]\r\n  };\r\n  _userModel2.default.query(query, function (err, result) {\r\n    if (err) {\r\n      return res.status(500).json({\r\n        err: err\r\n      });\r\n    }\r\n    if (result.rows.length > 0) {\r\n      return res.status(200).json({\r\n        result: result.rows\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nexports.disapproveRequest = function (req, res) {\r\n  var id = parseInt(req.params.requestId, 10);\r\n  var query = {\r\n    text: 'UPDATE requests SET status=$1 WHERE id=$2 RETURNING *',\r\n    values: ['disapproved', id]\r\n  };\r\n  _userModel2.default.query(query, function (err, result) {\r\n    if (err) {\r\n      return res.status(500).json({\r\n        err: err\r\n      });\r\n    }\r\n    if (result.rows.length > 0) {\r\n      return res.status(200).json({\r\n        result: result.rows\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nexports.resolveRequest = function (req, res) {\r\n  var id = parseInt(req.params.requestId, 10);\r\n  var query = {\r\n    text: 'UPDATE requests SET status=$1 WHERE id=$2 RETURNING *',\r\n    values: ['resolved', id]\r\n  };\r\n  _userModel2.default.query(query, function (err, result) {\r\n    if (err) {\r\n      return res.status(500).json({\r\n        err: err\r\n      });\r\n    }\r\n    if (result.rows.length > 0) {\r\n      return res.status(200).json({\r\n        result: result.rows\r\n      });\r\n    }\r\n  });\r\n};\r\n//# sourceMappingURL=adminController.js.map"]}