{"version":3,"sources":["../../../public/js/userReqPage.js"],"names":["urlString","window","location","href","url","URL","param","searchParams","get","token","JSON","parse","sessionStorage","getItem","apiUrl","apiUrl2","reqDetails","document","getElementById","reqBtn","alertBox","myHeaders","Headers","Authorization","auth","fetch","headers","then","res","json","data","error","innerHTML","style","display","catch","result","output","requester_name","requester_email","date","dept","status","request","output2","id"],"mappings":"AAAA;;AAEA,IAAIA,YAAYC,OAAOC,QAAP,CAAgBC,IAAhC;AACA,IAAIC,MAAM,IAAIC,GAAJ,CAAQL,SAAR,CAAV;AACA,IAAIM,QAAQF,IAAIG,YAAJ,CAAiBC,GAAjB,CAAqB,IAArB,CAAZ;AACA,IAAIC,QAAQC,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,OAAvB,CAAX,CAAZ;AACA,IAAIC,SAAS,4BAA4BR,KAAzC;AACA,IAAIS,UAAU,wBAAd;AACA,IAAIC,aAAaC,SAASC,cAAT,CAAwB,cAAxB,CAAjB;AACA,IAAIC,SAASF,SAASC,cAAT,CAAwB,UAAxB,CAAb;AACA,IAAIE,WAAWH,SAASC,cAAT,CAAwB,WAAxB,CAAf;;AAEA,IAAIG,YAAY,IAAIC,OAAJ,CAAY;AACxBC,mBAAe,YAAYd,MAAMA;AADT,CAAZ,CAAhB;;AAIA,IAAIA,SAASA,MAAMe,IAAnB,EAAyB;AACrBC,UAAMV,OAAN,EAAe;AACXW,iBAASL;AADE,KAAf,EAEGM,IAFH,CAEQ,UAAUC,GAAV,EAAe;AACnB,eAAOA,IAAIC,IAAJ,EAAP;AACH,KAJD,EAIGF,IAJH,CAIQ,UAAUG,IAAV,EAAgB;AACpB;AACA,YAAIA,KAAKC,KAAT,EAAgB;AACZX,qBAASY,SAAT,GAAqB,inBAArB;AACAf,qBAASC,cAAT,CAAwB,eAAxB,EAAyCe,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACH;AACJ,KAVD,EAUGC,KAVH,CAUS,UAAUJ,KAAV,EAAiB;AACtB,eAAOA,KAAP;AACH,KAZD;;AAcAN,UAAMX,MAAN,EAAc;AACVY,iBAASL;AADC,KAAd,EAEGM,IAFH,CAEQ,UAAUC,GAAV,EAAe;AACnB,eAAOA,IAAIC,IAAJ,EAAP;AACH,KAJD,EAIGF,IAJH,CAIQ,UAAUS,MAAV,EAAkB;AACtB,YAAIC,SAAS,0DAA0DD,OAAOA,MAAP,CAAc,CAAd,EAAiBE,cAA3E,GAA4F,qEAA5F,GAAoKF,OAAOA,MAAP,CAAc,CAAd,EAAiBG,eAArL,GAAuM,iEAAvM,GAA2QH,OAAOA,MAAP,CAAc,CAAd,EAAiBI,IAA5R,GAAmS,+DAAnS,GAAqWJ,OAAOA,MAAP,CAAc,CAAd,EAAiBK,IAAtX,GAA6X,2DAA7X,GAA2bL,OAAOA,MAAP,CAAc,CAAd,EAAiBM,MAA5c,GAAqd,6BAArd,GAAqfN,OAAOA,MAAP,CAAc,CAAd,EAAiBO,OAAtgB,GAAghB,wBAA7hB;AACA,YAAIC,UAAU,sDAAsDR,OAAOA,MAAP,CAAc,CAAd,EAAiBS,EAAvE,GAA4E,+IAA1F;;AAEA1B,eAAOa,SAAP,GAAmBY,OAAnB;AACA5B,mBAAWgB,SAAX,GAAuBK,MAAvB;AACH,KAVD;AAWH,CA1BD,MA0BO;AACHjB,aAASY,SAAT,GAAqB,2iBAArB;AACAf,aAASC,cAAT,CAAwB,eAAxB,EAAyCe,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACH;AACD;AACA","file":"userReqPage.js","sourcesContent":["'use strict';\n\nvar urlString = window.location.href;\nvar url = new URL(urlString);\nvar param = url.searchParams.get('id');\nvar token = JSON.parse(sessionStorage.getItem('token'));\nvar apiUrl = '/api/v1/users/requests/' + param;\nvar apiUrl2 = '/api/v1/users/requests';\nvar reqDetails = document.getElementById('user-details');\nvar reqBtn = document.getElementById('edit-btn');\nvar alertBox = document.getElementById('alert-box');\n\nvar myHeaders = new Headers({\n    Authorization: 'Bearer ' + token.token\n});\n\nif (token && token.auth) {\n    fetch(apiUrl2, {\n        headers: myHeaders\n    }).then(function (res) {\n        return res.json();\n    }).then(function (data) {\n        // console.log(data);\n        if (data.error) {\n            alertBox.innerHTML = '\\n    <header>\\n        <a class=\"brand\" href=\"#\">M-Tracker</a>\\n        <nav class=\"nav-bar\">\\n            <ul>\\n                <li><a class=\"btn btn-default\" href=\"../sign-in.html\">Log in</a></li>\\n            </ul>\\n        </nav>\\n    </header>\\n    <div class=\"wrapper\" style=\"margin-top: 200px\">\\n        <div class=\"alert\" id=\"alert-message\">\\n            <p>\\n                Oops! Sorry, Your session has ended, therefore You are not Authorized to view this page, <strong>kindly log in!</strong>\\n            </p>\\n        </div>\\n    </div>\\n    <footer>\\n        <p>&copy;2018 VeeqTor</p>\\n    </footer>\\n      ';\n            document.getElementById('alert-message').style.display = 'block';\n        }\n    }).catch(function (error) {\n        return error;\n    });\n\n    fetch(apiUrl, {\n        headers: myHeaders\n    }).then(function (res) {\n        return res.json();\n    }).then(function (result) {\n        var output = '\\n                <li><strong>Creator:</strong>&nbsp;' + result.result[0].requester_name + '</li>\\n                <li><strong>Email of creator:</strong>&nbsp;' + result.result[0].requester_email + '</li>\\n                <li><strong>Date created:</strong>&nbsp;' + result.result[0].date + '</li>\\n                <li><strong>Department:</strong>&nbsp;' + result.result[0].dept + '</li>\\n                <li><strong>Status:&nbsp;</strong>' + result.result[0].status + '</li>\\n                <li>' + result.result[0].request + '</li>\\n       \\n      ';\n        var output2 = ' \\n                <a href=\"edit-request.html?id=' + result.result[0].id + '\" class=\"btn btn-default\" title=\"Edit\">Edit</a>\\n                <a href=\"user.html\" title=\"Go back\" class=\"btn btn-default\">Back</a>\\n      ';\n\n        reqBtn.innerHTML = output2;\n        reqDetails.innerHTML = output;\n    });\n} else {\n    alertBox.innerHTML = '\\n    <header>\\n        <a class=\"brand\" href=\"#\">M-Tracker</a>\\n        <nav class=\"nav-bar\">\\n            <ul>\\n                <li><a class=\"btn btn-default\" href=\"../sign-in.html\">Log in</a></li>\\n            </ul>\\n        </nav>\\n    </header>\\n    <div class=\"wrapper\" style=\"margin-top: 200px\">\\n        <div class=\"alert\" id=\"alert-message\">\\n            <p>\\n                Oops! Sorry, You do not have access to this page!!\\n            </p>\\n        </div>\\n    </div>\\n    <footer>\\n        <p>&copy;2018 VeeqTor</p>\\n    </footer>\\n      ';\n    document.getElementById('alert-message').style.display = 'block';\n}\n//# sourceMappingURL=userReqPage.js.map\n//# sourceMappingURL=userReqPage.js.map"]}