{"version":3,"sources":["../../../public/js/user-page.js"],"names":["requests","document","getElementById","token","JSON","parse","localStorage","getItem","apiUrl","deleteData","requestId","res","confirm","fetch","method","headers","Headers","Authorization","then","resp","json","data","message","window","location","href","count","output","result","forEach","request","requester_name","requester_email","status","date","id","innerHTML","catch","error","console"],"mappings":"AAAA;;AAEA,IAAIA,WAAWC,SAASC,cAAT,CAAwB,cAAxB,CAAf;AACA,IAAIC,QAAQC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,OAArB,CAAX,CAAZ;AACA,IAAIC,SAAS,yBAAb;;AAEA,IAAIL,KAAJ,EAAW;AACT,MAAIM,aAAa,SAASA,UAAT,CAAoBC,SAApB,EAA+B;AAC9C,QAAIC,MAAMC,QAAQ,eAAR,CAAV;AACA,QAAID,GAAJ,EAAS;AACPE,YAAM,2BAA2BH,SAA3B,GAAuC,SAA7C,EAAwD;AACtDI,gBAAQ,QAD8C;AAEtDC,iBAAS,IAAIC,OAAJ,CAAY;AACnBC,yBAAe,YAAYd;AADR,SAAZ;AAF6C,OAAxD,EAKGe,IALH,CAKQ,UAAUC,IAAV,EAAgB;AACtB,eAAOA,KAAKC,IAAL,EAAP;AACD,OAPD,EAOGF,IAPH,CAOQ,UAAUG,IAAV,EAAgB;AACtB,YAAIA,KAAKC,OAAL,KAAiB,EAArB,EAAyB;AACvBC,iBAAOC,QAAP,CAAgBC,IAAhB,GAAuB,WAAvB;AACD;AACF,OAXD;AAYD;AACF,GAhBD;;AAkBAZ,QAAML,MAAN,EAAc;AACZO,aAAS,IAAIC,OAAJ,CAAY;AACnBC,qBAAe,YAAYd;AADR,KAAZ;AADG,GAAd,EAIGe,IAJH,CAIQ,UAAUP,GAAV,EAAe;AACrB,WAAOA,IAAIS,IAAJ,EAAP;AACD,GAND,EAMGF,IANH,CAMQ,UAAUG,IAAV,EAAgB;AACtB,QAAIK,QAAQ,CAAZ;AACA,QAAIC,SAAS,EAAb;AACAN,SAAKO,MAAL,CAAYC,OAAZ,CAAoB,UAAUC,OAAV,EAAmB;AACrCH,gBAAU,sDAAsDD,SAAS,CAA/D,IAAoE,iCAApE,GAAwGI,QAAQC,cAAhH,GAAiI,iCAAjI,GAAqKD,QAAQE,eAA7K,GAA+L,0DAA/L,GAA4PF,QAAQG,MAApQ,GAA6Q,eAA7Q,GAA+RH,QAAQG,MAAvS,GAAgT,wCAAhT,GAA2VH,QAAQI,IAAnW,GAA0W,8FAA1W,GAA2cJ,QAAQK,EAAnd,GAAwd,+FAAxd,GAA0jBL,QAAQK,EAAlkB,GAAukB,8GAAvkB,GAAwrBL,QAAQK,EAAhsB,GAAqsB,qGAA/sB;AACD,KAFD;AAGAnC,aAASoC,SAAT,GAAqBT,MAArB;AACD,GAbD,EAaGU,KAbH,CAaS,UAAUC,KAAV,EAAiB;AACxB,WAAOC,QAAQD,KAAR,CAAcA,KAAd,CAAP;AACD,GAfD;AAgBD,CAnCD,MAmCO;AACLrC,WAASC,cAAT,CAAwB,OAAxB,EAAiCkC,SAAjC,GAA6C,2FAA7C;AACD;AACD;AACA","file":"user-page.js","sourcesContent":["'use strict';\n\nvar requests = document.getElementById('userRequests');\nvar token = JSON.parse(localStorage.getItem('token'));\nvar apiUrl = '/api/v1/users/requests/';\n\nif (token) {\n  var deleteData = function deleteData(requestId) {\n    var res = confirm('ARE YOU SURE?');\n    if (res) {\n      fetch('api/v1/users/requests/' + requestId + '/delete', {\n        method: 'DELETE',\n        headers: new Headers({\n          Authorization: 'Bearer ' + token\n        })\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (data) {\n        if (data.message !== '') {\n          window.location.href = 'user.html';\n        }\n      });\n    }\n  };\n\n  fetch(apiUrl, {\n    headers: new Headers({\n      Authorization: 'Bearer ' + token\n    })\n  }).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    var count = 0;\n    var output = '';\n    data.result.forEach(function (request) {\n      output += '\\n                <tr>\\n                    <td>' + (count += 1) + '</td>\\n                    <td>' + request.requester_name + '</td>\\n                    <td>' + request.requester_email + '</td>\\n                    <td><span class=\"label label-' + request.status + ' tableClear\">' + request.status + '</span></td>\\n                    <td>' + request.date + '</td>\\n                    <td>\\n                        <a href=\"user-view-details.html?id=' + request.id + '\" class=\"btn-sm btn-primary\">View</a>\\n                        <a href=\"edit-request.html?id=' + request.id + '\" class=\"btn-sm btn-edit\">Edit</a>\\n                        <a href=\"javascript:void(0)\" onClick=deleteData(' + request.id + '); class=\"btn-sm btn-delete\">Delete</a>\\n                    </td>\\n                </tr>\\n        ';\n    });\n    requests.innerHTML = output;\n  }).catch(function (error) {\n    return console.error(error);\n  });\n} else {\n  document.getElementById('alert').innerHTML = '\\n      <p>\\n            Oops!! You do not have access to this page!!\\n      </p>\\n      ';\n}\n//# sourceMappingURL=userPage.js.map\n//# sourceMappingURL=user-page.js.map"]}