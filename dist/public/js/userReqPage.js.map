{"version":3,"sources":["../../../public/js/userReqPage.js"],"names":["urlString","window","location","href","url","URL","param","searchParams","get","token","JSON","parse","sessionStorage","getItem","apiUrl","apiUrl2","reqDetails","document","getElementById","reqBtn","alertBox","myHeaders","Headers","Authorization","auth","fetch","headers","then","res","json","data","error","innerHTML","style","display","catch","result","output","requester_name","requester_email","date","dept","status","request","output2","id"],"mappings":";;AAAA,IAAMA,YAAYC,OAAOC,QAAP,CAAgBC,IAAlC;AACA,IAAMC,MAAM,IAAIC,GAAJ,CAAQL,SAAR,CAAZ;AACA,IAAMM,QAAQF,IAAIG,YAAJ,CAAiBC,GAAjB,CAAqB,IAArB,CAAd;AACA,IAAMC,QAAQC,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,OAAvB,CAAX,CAAd;AACA,IAAMC,qCAAmCR,KAAzC;AACA,IAAMS,UAAU,wBAAhB;AACA,IAAMC,aAAaC,SAASC,cAAT,CAAwB,cAAxB,CAAnB;AACA,IAAMC,SAASF,SAASC,cAAT,CAAwB,UAAxB,CAAf;AACA,IAAME,WAAWH,SAASC,cAAT,CAAwB,WAAxB,CAAjB;;AAEA,IAAMG,YAAY,IAAIC,OAAJ,CAAY;AAC5BC,+BAAyBd,MAAMA;AADH,CAAZ,CAAlB;;AAIA,IAAIA,SAASA,MAAMe,IAAnB,EAAyB;AACvBC,UAAMV,OAAN,EAAe;AACbW,iBAASL;AADI,KAAf,EAGGM,IAHH,CAGQ;AAAA,eAAOC,IAAIC,IAAJ,EAAP;AAAA,KAHR,EAIGF,IAJH,CAIQ,UAACG,IAAD,EAAU;AACd;AACA,YAAIA,KAAKC,KAAT,EAAgB;AACdX,qBAASY,SAAT;AAoBAf,qBAASC,cAAT,CAAwB,eAAxB,EAAyCe,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACD;AACF,KA7BH,EA8BGC,KA9BH,CA8BS;AAAA,eAASJ,KAAT;AAAA,KA9BT;;AAgCAN,UAAMX,MAAN,EAAc;AACZY,iBAASL;AADG,KAAd,EAGGM,IAHH,CAGQ;AAAA,eAAOC,IAAIC,IAAJ,EAAP;AAAA,KAHR,EAIGF,IAJH,CAIQ,UAACS,MAAD,EAAY;AAChB,YAAMC,mEACyCD,OAAOA,MAAP,CAAc,CAAd,EAAiBE,cAD1D,2EAEkDF,OAAOA,MAAP,CAAc,CAAd,EAAiBG,eAFnE,uEAG8CH,OAAOA,MAAP,CAAc,CAAd,EAAiBI,IAH/D,qEAI4CJ,OAAOA,MAAP,CAAc,CAAd,EAAiBK,IAJ7D,iEAKwCL,OAAOA,MAAP,CAAc,CAAd,EAAiBM,MALzD,mCAMUN,OAAOA,MAAP,CAAc,CAAd,EAAiBO,OAN3B,2BAAN;AASA,YAAMC,gEACoCR,OAAOA,MAAP,CAAc,CAAd,EAAiBS,EADrD,kJAAN;;AAKA1B,eAAOa,SAAP,GAAmBY,OAAnB;AACA5B,mBAAWgB,SAAX,GAAuBK,MAAvB;AACD,KArBH;AAsBD,CAvDD,MAuDO;AACLjB,aAASY,SAAT;AAoBAf,aAASC,cAAT,CAAwB,eAAxB,EAAyCe,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACD","file":"userReqPage.js","sourcesContent":["const urlString = window.location.href;\r\nconst url = new URL(urlString);\r\nconst param = url.searchParams.get('id');\r\nconst token = JSON.parse(sessionStorage.getItem('token'));\r\nconst apiUrl = `/api/v1/users/requests/${param}`;\r\nconst apiUrl2 = '/api/v1/users/requests';\r\nconst reqDetails = document.getElementById('user-details');\r\nconst reqBtn = document.getElementById('edit-btn');\r\nconst alertBox = document.getElementById('alert-box');\r\n\r\nconst myHeaders = new Headers({\r\n  Authorization: `Bearer ${token.token}`,\r\n});\r\n\r\nif (token && token.auth) {\r\n  fetch(apiUrl2, {\r\n    headers: myHeaders,\r\n  })\r\n    .then(res => res.json())\r\n    .then((data) => {\r\n      // console.log(data);\r\n      if (data.error) {\r\n        alertBox.innerHTML = `\r\n    <header>\r\n        <a class=\"brand\" href=\"#\">M-Tracker</a>\r\n        <nav class=\"nav-bar\">\r\n            <ul>\r\n                <li><a class=\"btn btn-default\" href=\"../sign-in.html\">Log in</a></li>\r\n            </ul>\r\n        </nav>\r\n    </header>\r\n    <div class=\"wrapper\" style=\"margin-top: 200px\">\r\n        <div class=\"alert\" id=\"alert-message\">\r\n            <p>\r\n                Oops! Sorry, Your session has ended, therefore You are not Authorized to view this page, <strong>kindly log in!</strong>\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <footer>\r\n        <p>&copy;2018 VeeqTor</p>\r\n    </footer>\r\n      `;\r\n        document.getElementById('alert-message').style.display = 'block';\r\n      }\r\n    })\r\n    .catch(error => error);\r\n\r\n  fetch(apiUrl, {\r\n    headers: myHeaders,\r\n  })\r\n    .then(res => res.json())\r\n    .then((result) => {\r\n      const output = `\r\n                <li><strong>Creator:</strong>&nbsp;${result.result[0].requester_name}</li>\r\n                <li><strong>Email of creator:</strong>&nbsp;${result.result[0].requester_email}</li>\r\n                <li><strong>Date created:</strong>&nbsp;${result.result[0].date}</li>\r\n                <li><strong>Department:</strong>&nbsp;${result.result[0].dept}</li>\r\n                <li><strong>Status:&nbsp;</strong>${result.result[0].status}</li>\r\n                <li>${result.result[0].request}</li>\r\n       \r\n      `;\r\n      const output2 = ` \r\n                <a href=\"edit-request.html?id=${result.result[0].id}\" class=\"btn btn-default\" title=\"Edit\">Edit</a>\r\n                <a href=\"user.html\" title=\"Go back\" class=\"btn btn-default\">Back</a>\r\n      `;\r\n\r\n      reqBtn.innerHTML = output2;\r\n      reqDetails.innerHTML = output;\r\n    });\r\n} else {\r\n  alertBox.innerHTML = `\r\n    <header>\r\n        <a class=\"brand\" href=\"#\">M-Tracker</a>\r\n        <nav class=\"nav-bar\">\r\n            <ul>\r\n                <li><a class=\"btn btn-default\" href=\"../sign-in.html\">Log in</a></li>\r\n            </ul>\r\n        </nav>\r\n    </header>\r\n    <div class=\"wrapper\" style=\"margin-top: 200px\">\r\n        <div class=\"alert\" id=\"alert-message\">\r\n            <p>\r\n                Oops! Sorry, You do not have access to this page!!\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <footer>\r\n        <p>&copy;2018 VeeqTor</p>\r\n    </footer>\r\n      `;\r\n  document.getElementById('alert-message').style.display = 'block';\r\n}\r\n\r\n"]}