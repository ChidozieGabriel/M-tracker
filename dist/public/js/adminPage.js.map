{"version":3,"sources":["../../../public/js/adminPage.js"],"names":["requests","document","getElementById","token","JSON","parse","localStorage","getItem","apiUrl","approve","requestId","res","confirm","fetch","method","headers","Headers","Authorization","then","resp","json","data","message","window","location","href","disapprove","resolve","output","result","forEach","request","requester_name","requester_email","status","date","id","innerHTML","catch","console","error"],"mappings":"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","file":"adminPage.js","sourcesContent":["const requests = document.getElementById('adminRequests');\r\nconst token = JSON.parse(localStorage.getItem('token'));\r\nconst apiUrl = '/api/v1/requests/';\r\n\r\nif (token) {\r\n  fetch(apiUrl, {\r\n    headers: new Headers({\r\n      Authorization: `Bearer ${token}`,\r\n    }),\r\n  })\r\n    .then(res => res.json())\r\n    .then((data) => {\r\n      let output = '';\r\n      data.result.forEach((request) => {\r\n        output += `\r\n                <tr>\r\n                    <td>${request.requester_name}</td>\r\n                    <td>${request.requester_email}</td>\r\n                    <td><span class=\"label label-${request.status} tableClear\">${request.status}</span></td>\r\n                    <td>${request.date}</td>\r\n                    <td>${request.request}</td>\r\n                    <td>\r\n                        <a href=\"#\" onClick=approve(${request.id}); class=\"btn-sm btn-approve\">Approve</a>\r\n                        <a href=\"#\" onClick=disapprove(${request.id}); class=\"btn-sm btn-delete\">Disapprove</a>\r\n                        <a href=\"#\" onClick=resolve(${request.id}); class=\"btn-sm btn-resolve\">Resolve</a>\r\n                    </td>\r\n                </tr>\r\n        `;\r\n      });\r\n      requests.innerHTML = output;\r\n    })\r\n    .catch(error => console.error(error));\r\n\r\n  function approve(requestId) {\r\n    const res = confirm('ARE YOU SURE?');\r\n    if (res) {\r\n      fetch(`api/v1/requests/${requestId}/approve`, {\r\n        method: 'PUT',\r\n        headers: new Headers({\r\n          Authorization: `Bearer ${token}`,\r\n        }),\r\n      })\r\n        .then(resp => resp.json())\r\n        .then((data) => {\r\n          if (data.message !== '') {\r\n            window.location.href = 'admin.html';\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  function disapprove(requestId) {\r\n    const res = confirm('ARE YOU SURE?');\r\n    if (res) {\r\n      fetch(`api/v1/requests/${requestId}/disapprove`, {\r\n        method: 'PUT',\r\n        headers: new Headers({\r\n          Authorization: `Bearer ${token}`,\r\n        }),\r\n      })\r\n        .then(resp => resp.json())\r\n        .then((data) => {\r\n          if (data.message !== '') {\r\n            window.location.href = 'admin.html';\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  function resolve(requestId) {\r\n    const res = confirm('ARE YOU SURE?');\r\n    if (res) {\r\n      fetch(`api/v1/requests/${requestId}/resolve`, {\r\n        method: 'PUT',\r\n        headers: new Headers({\r\n          Authorization: `Bearer ${token}`,\r\n        }),\r\n      })\r\n        .then(resp => resp.json())\r\n        .then((data) => {\r\n          if (data.message !== '') {\r\n            window.location.href = 'admin.html';\r\n          }\r\n        });\r\n    }\r\n  }\r\n} else {\r\n  document.getElementById('alert').innerHTML = `\r\n      <p>\r\n            Oops!! You do not have access to this page!!\r\n      </p>\r\n      `;\r\n}\r\n"]}