{"version":3,"sources":["../../../public/js/user-page.js"],"names":["requests","document","getElementById","token","JSON","parse","localStorage","getItem","apiUrl","deleteData","requestId","res","confirm","fetch","method","headers","Headers","Authorization","then","resp","json","data","message","window","location","href","count","output","result","forEach","request","requester_name","requester_email","status","date","id","innerHTML","catch","console","error"],"mappings":";;AAAA,IAAMA,WAAWC,SAASC,cAAT,CAAwB,cAAxB,CAAjB;AACA,IAAMC,QAAQC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,OAArB,CAAX,CAAd;AACA,IAAMC,SAAS,yBAAf;;AAEA,IAAIL,KAAJ,EAAW;AAAA,MA8BAM,UA9BA,GA8BT,SAASA,UAAT,CAAoBC,SAApB,EAA+B;AAC7B,QAAMC,MAAMC,QAAQ,eAAR,CAAZ;AACA,QAAID,GAAJ,EAAS;AACPE,uCAA+BH,SAA/B,cAAmD;AACjDI,gBAAQ,QADyC;AAEjDC,iBAAS,IAAIC,OAAJ,CAAY;AACnBC,qCAAyBd;AADN,SAAZ;AAFwC,OAAnD,EAMGe,IANH,CAMQ;AAAA,eAAQC,KAAKC,IAAL,EAAR;AAAA,OANR,EAOGF,IAPH,CAOQ,UAACG,IAAD,EAAU;AACd,YAAIA,KAAKC,OAAL,KAAiB,EAArB,EAAyB;AACvBC,iBAAOC,QAAP,CAAgBC,IAAhB,GAAuB,WAAvB;AACD;AACF,OAXH;AAYD;AACF,GA9CQ;;AACTZ,QAAML,MAAN,EAAc;AACZO,aAAS,IAAIC,OAAJ,CAAY;AACnBC,iCAAyBd;AADN,KAAZ;AADG,GAAd,EAKGe,IALH,CAKQ;AAAA,WAAOP,IAAIS,IAAJ,EAAP;AAAA,GALR,EAMGF,IANH,CAMQ,UAACG,IAAD,EAAU;AACd,QAAIK,QAAQ,CAAZ;AACA,QAAIC,SAAS,EAAb;AACAN,SAAKO,MAAL,CAAYC,OAAZ,CAAoB,UAACC,OAAD,EAAa;AAC/BH,sEAEkBD,SAAS,CAF3B,wCAGkBI,QAAQC,cAH1B,uCAIkBD,QAAQE,eAJ1B,gEAK2CF,QAAQG,MALnD,qBAKyEH,QAAQG,MALjF,8CAMkBH,QAAQI,IAN1B,oGAQqDJ,QAAQK,EAR7D,qGASgDL,QAAQK,EATxD,oHAUkEL,QAAQK,EAV1E;AAcD,KAfD;AAgBAnC,aAASoC,SAAT,GAAqBT,MAArB;AACD,GA1BH,EA2BGU,KA3BH,CA2BS;AAAA,WAASC,QAAQC,KAAR,CAAcA,KAAd,CAAT;AAAA,GA3BT;AA8CD,CA/CD,MA+CO;AACLtC,WAASC,cAAT,CAAwB,OAAxB,EAAiCkC,SAAjC;AAKD","file":"user-page.js","sourcesContent":["const requests = document.getElementById('userRequests');\r\nconst token = JSON.parse(localStorage.getItem('token'));\r\nconst apiUrl = '/api/v1/users/requests/';\r\n\r\nif (token) {\r\n  fetch(apiUrl, {\r\n    headers: new Headers({\r\n      Authorization: `Bearer ${token}`,\r\n    }),\r\n  })\r\n    .then(res => res.json())\r\n    .then((data) => {\r\n      let count = 0;\r\n      let output = '';\r\n      data.result.forEach((request) => {\r\n        output += `\r\n                <tr>\r\n                    <td>${count += 1}</td>\r\n                    <td>${request.requester_name}</td>\r\n                    <td>${request.requester_email}</td>\r\n                    <td><span class=\"label label-${request.status} tableClear\">${request.status}</span></td>\r\n                    <td>${request.date}</td>\r\n                    <td>\r\n                        <a href=\"user-view-details.html?id=${request.id}\" class=\"btn-sm btn-primary\">View</a>\r\n                        <a href=\"edit-request.html?id=${request.id}\" class=\"btn-sm btn-edit\">Edit</a>\r\n                        <a href=\"javascript:void(0)\" onClick=deleteData(${request.id}); class=\"btn-sm btn-delete\">Delete</a>\r\n                    </td>\r\n                </tr>\r\n        `;\r\n      });\r\n      requests.innerHTML = output;\r\n    })\r\n    .catch(error => console.error(error));\r\n\r\n  function deleteData(requestId) {\r\n    const res = confirm('ARE YOU SURE?');\r\n    if (res) {\r\n      fetch(`api/v1/users/requests/${requestId}/delete`, {\r\n        method: 'DELETE',\r\n        headers: new Headers({\r\n          Authorization: `Bearer ${token}`,\r\n        }),\r\n      })\r\n        .then(resp => resp.json())\r\n        .then((data) => {\r\n          if (data.message !== '') {\r\n            window.location.href = 'user.html';\r\n          }\r\n        });\r\n    }\r\n  }\r\n} else {\r\n  document.getElementById('alert').innerHTML = `\r\n      <p>\r\n            Oops!! You do not have access to this page!!\r\n      </p>\r\n      `;\r\n}\r\n"]}