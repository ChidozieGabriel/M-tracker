{"version":3,"sources":["../../../public/js/edit.js"],"names":["url","URL","window","location","href","id","searchParams","get","editRequest","document","getElementById","apiUrl","token","JSON","parse","localStorage","getItem","myHeaders","Headers","Authorization","fetch","headers","then","res","json","result","value","requester_name","requester_email","dept","request","addEventListener","e","preventDefault","payload","name","email","method","body","data","message","catch","console","error"],"mappings":";;AAAA,IAAMA,MAAM,IAAIC,GAAJ,CAAQC,OAAOC,QAAP,CAAgBC,IAAxB,CAAZ;AACA,IAAMC,KAAKL,IAAIM,YAAJ,CAAiBC,GAAjB,CAAqB,IAArB,CAAX;AACA,IAAMC,cAAcC,SAASC,cAAT,CAAwB,MAAxB,CAApB;AACA,IAAMC,qCAAmCN,EAAzC;AACA,IAAMO,QAAQC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,OAArB,CAAX,CAAd;;AAGA,IAAMC,YAAY,IAAIC,OAAJ,CAAY;AAC5BC,6BAAyBP;AADG,CAAZ,CAAlB;;AAIAQ,MAAMT,MAAN,EAAc;AACZU,WAASJ;AADG,CAAd,EAGGK,IAHH,CAGQ;AAAA,SAAOC,IAAIC,IAAJ,EAAP;AAAA,CAHR,EAIGF,IAJH,CAIQ,UAACG,MAAD,EAAY;AAChBhB,WAASC,cAAT,CAAwB,MAAxB,EAAgCgB,KAAhC,GAAwCD,OAAOA,MAAP,CAAc,CAAd,EAAiBE,cAAzD;AACAlB,WAASC,cAAT,CAAwB,OAAxB,EAAiCgB,KAAjC,GAAyCD,OAAOA,MAAP,CAAc,CAAd,EAAiBG,eAA1D;AACAnB,WAASC,cAAT,CAAwB,MAAxB,EAAgCgB,KAAhC,GAAwCD,OAAOA,MAAP,CAAc,CAAd,EAAiBI,IAAzD;AACApB,WAASC,cAAT,CAAwB,SAAxB,EAAmCgB,KAAnC,GAA2CD,OAAOA,MAAP,CAAc,CAAd,EAAiBK,OAA5D;AACD,CATH;;AAWAtB,YAAYuB,gBAAZ,CAA6B,QAA7B,EAAuC,UAACC,CAAD,EAAO;AAC5CA,IAAEC,cAAF;AACA,MAAMC,UAAU;AACdC,UAAM1B,SAASC,cAAT,CAAwB,MAAxB,EAAgCgB,KADxB;AAEdU,WAAO3B,SAASC,cAAT,CAAwB,OAAxB,EAAiCgB,KAF1B;AAGdG,UAAMpB,SAASC,cAAT,CAAwB,MAAxB,EAAgCgB,KAHxB;AAIdI,aAASrB,SAASC,cAAT,CAAwB,SAAxB,EAAmCgB;AAJ9B,GAAhB;;AAOAN,QAAMT,MAAN,EAAc;AACZ0B,YAAQ,KADI;AAEZC,oBAAcJ,QAAQC,IAAtB,eAAoCD,QAAQE,KAA5C,cAA0DF,QAAQL,IAAlE,iBAAkFK,QAAQJ,OAF9E;AAGZT,aAAS,IAAIH,OAAJ,CAAY;AACnB,sBAAgB,mCADG;AAEnBC,iCAAyBP;AAFN,KAAZ;AAHG,GAAd,EAQGU,IARH,CAQQ;AAAA,WAAOC,IAAIC,IAAJ,EAAP;AAAA,GARR,EASGF,IATH,CASQ,UAACiB,IAAD,EAAU;AACd,QAAIA,KAAKC,OAAL,KAAiB,EAArB,EAAyB;AACvBtC,aAAOC,QAAP,CAAgBC,IAAhB,GAAuB,WAAvB;AACD;AACF,GAbH,EAcGqC,KAdH,CAcS;AAAA,WAASC,QAAQC,KAAR,aAAwBA,KAAxB,CAAT;AAAA,GAdT;AAeD,CAxBD","file":"edit.js","sourcesContent":["const url = new URL(window.location.href);\r\nconst id = url.searchParams.get('id');\r\nconst editRequest = document.getElementById('edit');\r\nconst apiUrl = `/api/v1/users/requests/${id}`;\r\nconst token = JSON.parse(localStorage.getItem('token'));\r\n\r\n\r\nconst myHeaders = new Headers({\r\n  Authorization: `Bearer ${token}`,\r\n});\r\n\r\nfetch(apiUrl, {\r\n  headers: myHeaders,\r\n})\r\n  .then(res => res.json())\r\n  .then((result) => {\r\n    document.getElementById('name').value = result.result[0].requester_name;\r\n    document.getElementById('email').value = result.result[0].requester_email;\r\n    document.getElementById('dept').value = result.result[0].dept;\r\n    document.getElementById('request').value = result.result[0].request;\r\n  });\r\n\r\neditRequest.addEventListener('submit', (e) => {\r\n  e.preventDefault();\r\n  const payload = {\r\n    name: document.getElementById('name').value,\r\n    email: document.getElementById('email').value,\r\n    dept: document.getElementById('dept').value,\r\n    request: document.getElementById('request').value,\r\n  };\r\n\r\n  fetch(apiUrl, {\r\n    method: 'PUT',\r\n    body: `name=${payload.name}&email=${payload.email}&dept=${payload.dept}&request=${payload.request}`,\r\n    headers: new Headers({\r\n      'Content-Type': 'application/x-www-form-urlencoded',\r\n      Authorization: `Bearer ${token}`,\r\n    }),\r\n  })\r\n    .then(res => res.json())\r\n    .then((data) => {\r\n      if (data.message !== '') {\r\n        window.location.href = 'user.html';\r\n      }\r\n    })\r\n    .catch(error => console.error(`Error: ${error}`));\r\n});\r\n"]}